$( document ).ready( function() {
	
	// The following code is only called on the index page of the appointments controller
	if( $( 'body.appointments').length && $( 'body.index' ).length ) {
		$( '#calendar' ).fullCalendar({
			defaultView: 'agendaWeek',
			doctorsSource: '/doctors/list',
			eventSources: ['/appointments/findByDate'],
			allDaySlot: false,
			minTime: '7:30am',
			maxTime: '6:00pm',
			slotMinutes: 10,
      eventClick: function(calEvent, jsEvent, view) {

          alert('Event: ' + calEvent.title);
          alert('Coordinates: ' + jsEvent.pageX + ',' + jsEvent.pageY);
          alert('View: ' + view.name);

          // change the border color just for fun
          $(this).css('border-color', 'red');

      }
		});

        $("#search").autocomplete({
            source: "/doctors/search"
        });
        $("#find ").autocomplete({
            source: "/doctors/search"
        });
        $( "#date").datepicker();
	}
	
	// New appointment page
	if( $( 'body.appointments' ).length && $( 'body.new' ).length ) {
        $("#appointment_doctor").autocomplete({
            source: "/doctors/search"
        })
		
        $( "#appointment_date").datepicker();

        $( "#appointment_start_time").timepicker();
	}
	
});
