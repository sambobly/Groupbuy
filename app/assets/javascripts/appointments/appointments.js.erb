$( document ).ready( function() {
	
	// The following code is only called on the index page of the appointments controller
	if( $( 'body.appointments').length && $( 'body.index' ).length ) {
		$( '#calendar' ).fullCalendar({
			defaultView: 'agendaWeek',
			doctorsSource: '/doctors/list',
			eventSources: ['/appointments/findByDate'],
			allDaySlot: false,
			minTime: '7:30am',
			maxTime: '6:00pm',
			slotMinutes: 10,
            dayClick: function(date, allDay, jsEvent, view) {

                if (allDay) {
                    alert('Clicked on the entire day: ' + date);
                }else{
                    alert('Clicked on the slot: ' + date);
                }

                alert('Coordinates: ' + jsEvent.pageX + ',' + jsEvent.pageY);

                alert('Current view: ' + view.name);

                // change the day's background color just for fun
                $(this).css('background-color', 'red');

            }
        });

        $("#search").autocomplete({
            source: "/doctors/search"
        });
        $("#find ").autocomplete({
            source: "/doctors/search"
        });
        $( "#date").datepicker();
	}
	
	// New appointment page
	if( $( 'body.appointments' ).length && $( 'body.new' ).length ) {
        $("#appointment_doctor").autocomplete({
            source: "/doctors/search"
        })
		
        $( "#appointment_date").datepicker();

        $( "#appointment_start_time").timepicker();
	}
	
});
